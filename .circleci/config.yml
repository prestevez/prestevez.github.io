## CricleCI for prestevez.com
version: 2.1
jobs:
  build:
    docker:
      - image: cibuilds/hugo:0.76
        auth:
          username: $DOCKERHUB_USER
          password: $DOCKERHUB_PWD
    working_directory: ~/project

    steps:
      # checkout repository
      - checkout
      # build with hugo
      - run:
          name: "Run Hugo"
          command: HUGO_ENV=production hugo -v
      - deploy:
          command: |
          if [ "${CIRCLE_BRANCH}" == "master" ]; then
          git checkout -b gh-pages
          fi




workflows:
  build-and-deploy:
    jobs:
      - build:
          context:
              - authentication
#      - deploy:
#          requires:
#            - r-release

#  # CRON job daily at 4 am in the morning
#  # - runs the "build" job on the master branch and builds package cache
#  nightly:
#    triggers:
#      - schedule:
#          cron: "0 4 * * *"
#          filters:
#            branches:
#              only:
#                - master
#    jobs:
#      - r-release
# Custom user code -------------------------------------------------------------
